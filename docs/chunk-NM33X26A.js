import{a as N,b as p,c as j,d as M,e as P,g as E,i as I,j as R,l as z,m as D,o as Z}from"./chunk-Z7X5E6PB.js";import{l as O}from"./chunk-OLLSEIT3.js";import{a as S}from"./chunk-IRFL4NMA.js";import{l as L,s as G,t as q}from"./chunk-5DE6OTCK.js";import{$ as f,Ab as n,Bb as d,Hb as x,Lb as C,Mb as u,Sa as l,W as V,Xb as s,cb as T,cc as v,dc as h,e as k,ec as y,fa as _,ga as g,ha as b,tb as m,ub as c,yb as w,zb as i}from"./chunk-6HMZLBRA.js";var F=class t{httpClient=f(L);verifyMail(r){return this.httpClient.post(S.baseUrl+"auth/forgotPasswords",r)}verifyCode(r){return this.httpClient.post(S.baseUrl+"auth/verifyResetCode",r)}resetPassword(r){return this.httpClient.put(S.baseUrl+"auth/resetPassword",r)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})};function H(t,r){t&1&&(i(0,"div"),s(1," Email is required. "),n())}function U(t,r){t&1&&(i(0,"div"),s(1," Enter a valid Email address. "),n())}function $(t,r){if(t&1&&(i(0,"div",12),b(),i(1,"svg",15),d(2,"path",16),n(),m(3,H,2,0,"div")(4,U,2,0,"div"),n()),t&2){u();let e=y(8);l(3),c(e!=null&&e.getError("required")?3:e!=null&&e.getError("email")?4:-1)}}function J(t,r){t&1&&(i(0,"span",14),d(1,"i",17),n())}function K(t,r){if(t&1){let e=x();i(0,"form",6),C("ngSubmit",function(){_(e);let a=u();return g(a.submitForm())}),i(1,"div",7)(2,"h1",8),s(3,"Verify Email"),n()(),i(4,"div",9),d(5,"input",10),i(6,"label",11),s(7,"Email"),n(),v(8),m(9,$,5,1,"div",12),n(),i(10,"button",13),s(11," Verify Email "),m(12,J,2,0,"span",14),n()()}if(t&2){let e=u();w("formGroup",e.verifyEmail),l(8);let o=h(e.verifyEmail.get("email"));l(),c(o!=null&&o.errors&&(o!=null&&o.touched)||o!=null&&o.dirty&&(o!=null&&o.errors)||e.isValid&&(o!=null&&o.errors)?9:-1),l(3),c(e.isLoading?12:-1)}}function Q(t,r){t&1&&(i(0,"div"),s(1," code is required. "),n())}function W(t,r){if(t&1&&(i(0,"div",12),b(),i(1,"svg",15),d(2,"path",16),n(),m(3,Q,2,0,"div"),n()),t&2){u();let e=y(8);l(3),c(e!=null&&e.getError("required")?3:-1)}}function X(t,r){t&1&&(i(0,"span",14),d(1,"i",17),n())}function Y(t,r){if(t&1){let e=x();i(0,"form",6),C("ngSubmit",function(){_(e);let a=u();return g(a.submitForm())}),i(1,"div",7)(2,"h1",8),s(3," code sent to your Email"),n()(),i(4,"div",9),d(5,"input",18),i(6,"label",19),s(7,"code"),n(),v(8),m(9,W,4,1,"div",12),n(),i(10,"button",13),s(11," Next "),m(12,X,2,0,"span",14),n()()}if(t&2){let e=u();w("formGroup",e.code),l(8);let o=h(e.code.get("resetCode"));l(),c(o!=null&&o.errors&&(o!=null&&o.touched)||o!=null&&o.dirty&&(o!=null&&o.errors)||e.isValid&&(o!=null&&o.errors)?9:-1),l(3),c(e.isLoading?12:-1)}}function ee(t,r){t&1&&(i(0,"div"),s(1," Email is required. "),n())}function te(t,r){t&1&&(i(0,"div"),s(1," Enter a valid Email address. "),n())}function ie(t,r){if(t&1&&(i(0,"div",12),b(),i(1,"svg",15),d(2,"path",16),n(),m(3,ee,2,0,"div")(4,te,2,0,"div"),n()),t&2){u();let e=y(8);l(3),c(e!=null&&e.getError("required")?3:e!=null&&e.getError("email")?4:-1)}}function oe(t,r){if(t&1){let e=x();i(0,"span",26),C("click",function(){_(e);let a=u(2);return g(a.flag1=!a.flag1)}),d(1,"i",27),n()}}function ne(t,r){if(t&1){let e=x();i(0,"span",26),C("click",function(){_(e);let a=u(2);return g(a.flag1=!a.flag1)}),d(1,"i",28),n()}}function re(t,r){t&1&&(i(0,"div"),s(1," Password is required. "),n())}function ae(t,r){t&1&&(i(0,"div"),s(1," Password must be at least 8 characters letters,numbers, and a special character. "),n())}function le(t,r){if(t&1&&(i(0,"div",12),b(),i(1,"svg",15),d(2,"path",16),n(),m(3,re,2,0,"div")(4,ae,2,0,"div"),n()),t&2){u();let e=y(17);l(3),c(e!=null&&e.getError("required")?3:e!=null&&e.getError("pattern")?4:-1)}}function se(t,r){t&1&&(i(0,"span",14),d(1,"i",17),n())}function de(t,r){if(t&1){let e=x();i(0,"form",6),C("ngSubmit",function(){_(e);let a=u();return g(a.submitForm())}),i(1,"div",7)(2,"h1",8),s(3,"Reset Password"),n()(),i(4,"div",9),d(5,"input",10),i(6,"label",11),s(7,"Email"),n(),v(8),m(9,ie,5,1,"div",12),n(),i(10,"div",9)(11,"div",20),d(12,"input",21),m(13,oe,2,0,"span",22)(14,ne,2,0,"span",22),i(15,"label",23),s(16,"Password"),n()(),v(17),m(18,le,5,1,"div",12),n(),i(19,"button",13),s(20," Reset "),m(21,se,2,0,"span",14),n(),i(22,"div",24)(23,"p",25),s(24,"Forget Password ?"),n()()()}if(t&2){let e=u();w("formGroup",e.resetPassword),l(8);let o=h(e.resetPassword.get("email"));l(),c(o!=null&&o.errors&&(o!=null&&o.touched)||o!=null&&o.dirty&&(o!=null&&o.errors)||e.isValid&&(o!=null&&o.errors)?9:-1),l(3),w("type",e.flag1?"text":"password"),l(),c(e.flag1?13:14),l(4);let a=h(e.resetPassword.get("newPassword"));l(),c(a!=null&&a.errors&&(a!=null&&a.touched)||a!=null&&a.dirty&&(a!=null&&a.errors)||e.isValid&&(a!=null&&a.errors)?18:-1),l(3),c(e.isLoading?21:-1)}}var A=class t{forgetPassword=f(F);route=f(G);isValid=!1;isLoading=!1;flag1=!1;state=1;verifyEmail;code;resetPassword;subscription=new k;tostr=f(O);ngOnInit(){this.createFormGroup()}createFormGroup(){this.verifyEmail=new P({email:new E(null,[p.required,p.email])}),this.code=new P({resetCode:new E(null,[p.required])}),this.resetPassword=new P({email:new E(null,[p.required,p.email]),newPassword:new E(null,[p.required,p.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)])})}submitForm(){this.verifyEmail.valid?(this.isLoading=!0,this.subscription.unsubscribe(),console.log(this.verifyEmail),this.subscription=this.forgetPassword.verifyMail(this.verifyEmail.value).subscribe({next:()=>{this.isLoading=!1,this.tostr.success("Email verified.","",{timeOut:1e3,extendedTimeOut:500,progressBar:!0}),setTimeout(()=>{this.state=2},500)},error:()=>{this.isLoading=!1}})):this.isValid=!0,this.code.valid?(this.isValid=!1,this.isLoading=!0,this.subscription.unsubscribe(),console.log(this.code),this.subscription=this.forgetPassword.verifyCode(this.code.value).subscribe({next:()=>{this.isLoading=!1,this.tostr.success("code verified.","",{timeOut:1e3,extendedTimeOut:500,progressBar:!0}),setTimeout(()=>{this.state=3},500)},error:()=>{this.isLoading=!1}})):this.isValid=!0,this.resetPassword.valid?(this.isValid=!1,this.isLoading=!0,this.subscription.unsubscribe(),console.log(this.resetPassword),this.subscription=this.forgetPassword.resetPassword(this.resetPassword.value).subscribe({next:r=>{this.isLoading=!1,localStorage.setItem("token",r.token),this.tostr.success("Password has been reset successfully.","",{timeOut:1e3,extendedTimeOut:500,progressBar:!0}),setTimeout(()=>{this.route.navigate(["/home"])},500)},error:()=>{this.isLoading=!1}})):this.isValid=!0}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["app-forget-password"]],decls:8,vars:1,consts:[[1,"w-[95%]","md:w-[75%]","mx-auto","py-5","mt-5","pt-[52px]","mb-4"],[1,"flex","flex-col","my-auto"],[1,"flex","content-center","flex-col","md:flex-row","bg-white","border","border-gray-200","shadow-sm","rounded-lg","dark:border-gray-700","dark:bg-gray-800"],["src","./imgs/dl.beatsnoop 1.png","alt","register form",1,"object-cover","w-full","md:w-3/7","h-60","md:h-[35rem]","rounded-t-lg","md:rounded-s-lg"],[1,"md:w-4/7","my-auto","p-4","md:py-6","md:px-15","leading-relaxed","text-start"],[1,"w-full","flex","flex-col","justify-between","h-auto",3,"formGroup"],[1,"w-full","flex","flex-col","justify-between","h-auto",3,"ngSubmit","formGroup"],[1,"mb-5"],[1,"text-3xl","font-bold","mb-2"],[1,"relative","z-0","w-full","mb-3","group"],["formControlName","email","type","email","name","email","id","email","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer"],["for","email",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["role","alert",1,"flex","items-center","p-2","mt-1","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["type","submit",1,"mt-6","self-center","md:self-end","w-fit","rounded-lg","cursor-pointer","disabled:bg-gray-400","disabled:cursor-not-allowed","text-white","bg-black","font-medium","rounded-0","text-sm","px-18","py-2","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],[1,"ml-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"fa-solid","fa-spinner","animate-spin"],["formControlName","resetCode","type","text","name","code","id","code","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer"],["for","code",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"relative"],["formControlName","newPassword","name","password","id","password","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer",3,"type"],[1,"absolute","top-1/2","right-0","-translate-y-1/2","cursor-pointer"],["for","password",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"mt-5"],["routerLink","/forget-password",1,"text-md","font-semibold","cursor-pointer","hover:underline","underline-offset-2","hover:transition-all","hover:duration-2000","text-blue-400"],[1,"absolute","top-1/2","right-0","-translate-y-1/2","cursor-pointer",3,"click"],[1,"fa-solid","fa-eye"],[1,"fa-solid","fa-eye-slash"]],template:function(e,o){e&1&&(i(0,"section",0)(1,"div",1)(2,"div",2),d(3,"img",3),i(4,"div",4),m(5,K,13,4,"form",5)(6,Y,13,4,"form",5)(7,de,25,8,"form",5),n()()()()),e&2&&(l(5),c(o.state==1?5:o.state==2?6:7))},dependencies:[q,Z,I,N,j,M,D,R,z],encapsulation:2})};export{A as ForgetPasswordComponent};
