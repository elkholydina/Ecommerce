import{a as N,b as h,c as A,d as O,e as S,g as v,i as M,j as R,k as D,l as P,m as j,o as z}from"./chunk-Z7X5E6PB.js";import{a as I}from"./chunk-74NXI3YY.js";import{l as G}from"./chunk-OLLSEIT3.js";import"./chunk-IRFL4NMA.js";import{q as T,s as q}from"./chunk-5DE6OTCK.js";import{$ as f,Ab as i,Bb as u,Hb as L,Lb as _,Mb as b,Sa as l,Xb as d,cb as F,cc as x,dc as C,e as E,ec as k,fa as y,ga as w,ha as g,tb as m,ub as p,yb as V,zb as o}from"./chunk-6HMZLBRA.js";function H(e,t){e&1&&(o(0,"div"),d(1,"details is required."),i())}function B(e,t){if(e&1&&(o(0,"div",12),g(),o(1,"svg",20),u(2,"path",21),i(),m(3,H,2,0,"div"),i()),e&2){b();let r=k(11);l(3),p(r!=null&&r.getError("required")?3:-1)}}function $(e,t){e&1&&(o(0,"div"),d(1,"phone is required."),i())}function J(e,t){e&1&&(o(0,"div"),d(1,"Enter a valid Egyptian phone number."),i())}function K(e,t){if(e&1&&(o(0,"div",12),g(),o(1,"svg",20),u(2,"path",21),i(),m(3,$,2,0,"div")(4,J,2,0,"div"),i()),e&2){b();let r=k(17);l(3),p(r!=null&&r.getError("required")?3:r!=null&&r.getError("pattern")?4:-1)}}function Q(e,t){e&1&&(o(0,"div"),d(1,"city is required."),i())}function U(e,t){if(e&1&&(o(0,"div",12),g(),o(1,"svg",20),u(2,"path",21),i(),m(3,Q,2,0,"div"),i()),e&2){b();let r=k(23);l(3),p(r!=null&&r.getError("required")?3:-1)}}function W(e,t){e&1&&(o(0,"span",19),u(1,"i",22),i())}function X(e,t){e&1&&(o(0,"span",19),u(1,"i",22),i())}var Z=class e{route=f(q);tostr=f(G);activatedRoute=f(T);checkOut=f(I);isValid=!1;isLoading1=!1;isLoading2=!1;cartId="";subscription=new E;checkoutForm;ngOnInit(){this.createFormGroup(),this.getCartId()}createFormGroup(){this.checkoutForm=new S({shippingAddress:new S({details:new v(null,[h.required]),phone:new v(null,[h.required,h.pattern(/^01[0125][0-9]{8}$/)]),city:new v(null,[h.required])})})}getCartId(){this.activatedRoute.paramMap.subscribe({next:t=>{this.cartId=t.get("id")}})}submitForm1(){this.checkoutForm.valid?(console.log(this.cartId),console.log(this.checkoutForm.value),this.isLoading1=!0,this.subscription.unsubscribe(),this.subscription=this.checkOut.checkOutPayment(this.cartId,this.checkoutForm.value).subscribe({next:t=>{console.log(t),t.status=="success"&&(console.log("success"),this.isLoading1=!1,setTimeout(()=>{window.open(t.session.url,"_self")},500))},error:t=>{console.log(t.error.message)}})):this.isValid=!0}submitForm2(){this.checkoutForm.valid?(console.log(this.cartId),console.log(this.checkoutForm.value),this.isLoading2=!0,this.subscription.unsubscribe(),this.subscription=this.checkOut.cashPayment(this.cartId,this.checkoutForm.value).subscribe({next:t=>{console.log(t),this.isLoading2=!1,t.status=="success"&&(console.log("success"),setTimeout(()=>{this.route.navigate(["/cash-order"])},500))},error:t=>{console.log(t.error.message)}})):this.isValid=!0}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=F({type:e,selectors:[["app-checkout"]],decls:35,vars:9,consts:[[1,"w-[95%]","md:w-[75%]","mx-auto","py-5","pt-[52px]","mt-5","mb-4"],[1,"flex","flex-col"],[1,"flex","content-center","flex-col","md:flex-row","bg-white","border","border-gray-200","shadow-sm","rounded-lg","dark:border-gray-700","dark:bg-gray-800"],["src","./imgs/portrait-two-african-females-holding-shopping-bags-while-reacting-something-their-smartphone 1.png","alt","register form",1,"object-cover","w-full","md:w-3/7","h-60","md:min-h-[35rem]","rounded-t-lg","md:rounded-s-lg"],[1,"md:w-4/7","my-auto","p-4","md:py-6","md:px-15","leading-relaxed","text-start"],[1,"w-full","flex","flex-col","justify-between","h-auto",3,"formGroup"],["formGroupName","shippingAddress"],[1,"mb-5"],[1,"text-3xl","font-bold","mb-2"],[1,"relative","z-0","w-full","mb-3","group"],["formControlName","details","type","text","name","details","id","details","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer"],["for","details",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["role","alert",1,"flex","items-center","p-2","mt-1","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["formControlName","phone","type","phone","name","phone","id","phone","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer"],["for","phone",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],["formControlName","city","type","text","name","city","id","city","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-none","dark:text-white","dark:border-gray-600","dark:focus:border-blue-500","focus:outline-none","focus:ring-0","focus:border-black","peer"],["for","city",1,"peer-focus:font-medium","absolute","text-xs","text-gray-500","dark:text-gray-400","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-black","peer-focus:dark:text-blue-500","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6"],[1,"flex","flex-col","lg:flex-row","justify-between","w-full","mt-6","gap-3"],["type","submit",1,"mt-2","self-center","md:self-end","w-fit","rounded-lg","cursor-pointer","disabled:bg-gray-400","disabled:cursor-not-allowed","text-white","bg-black","font-medium","rounded-0","text-sm","px-8","py-2","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"ml-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"fa-solid","fa-spinner","animate-spin"]],template:function(r,s){if(r&1){let n=L();o(0,"section",0)(1,"div",1)(2,"div",2),u(3,"img",3),o(4,"div",4)(5,"form",5)(6,"div",6)(7,"div",7)(8,"h1",8),d(9,"Check Out"),i()(),o(10,"div",9),x(11),u(12,"input",10),o(13,"label",11),d(14,"details"),i(),m(15,B,4,1,"div",12),i(),o(16,"div",9),x(17),u(18,"input",13),o(19,"label",14),d(20,"phone"),i(),m(21,K,5,1,"div",12),i(),o(22,"div",9),x(23),u(24,"input",15),o(25,"label",16),d(26,"city"),i(),m(27,U,4,1,"div",12),i()(),o(28,"div",17)(29,"button",18),_("click",function(){return y(n),w(s.submitForm2())}),d(30," Payment with Cash "),m(31,W,2,0,"span",19),i(),o(32,"button",18),_("click",function(){return y(n),w(s.submitForm1())}),d(33," Payment with Visa "),m(34,X,2,0,"span",19),i()()()()()()()}if(r&2){l(5),V("formGroup",s.checkoutForm),l(6);let n=C(s.checkoutForm.get("shippingAddress.details"));l(4),p(n!=null&&n.errors&&(n!=null&&n.touched)||n!=null&&n.dirty&&(n!=null&&n.errors)||s.isValid&&(n!=null&&n.errors)?15:-1),l(2);let a=C(s.checkoutForm.get("shippingAddress.phone"));l(4),p(a!=null&&a.errors&&(a!=null&&a.touched)||a!=null&&a.dirty&&(a!=null&&a.errors)||s.isValid&&(a!=null&&a.errors)?21:-1),l(2);let c=C(s.checkoutForm.get("shippingAddress.city"));l(4),p(c!=null&&c.errors&&(c!=null&&c.touched)||c!=null&&c.dirty&&(c!=null&&c.errors)||s.isValid&&(c!=null&&c.errors)?27:-1),l(4),p(s.isLoading2?31:-1),l(3),p(s.isLoading1?34:-1)}},dependencies:[z,M,N,A,O,j,R,P,D],encapsulation:2})};export{Z as CheckoutComponent};
