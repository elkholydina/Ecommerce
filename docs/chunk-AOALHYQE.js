import{a as j}from"./chunk-YW32U5JU.js";import"./chunk-74NXI3YY.js";import"./chunk-OLLSEIT3.js";import{a as S}from"./chunk-IRFL4NMA.js";import{l as k}from"./chunk-5DE6OTCK.js";import{$ as s,Ab as l,Bb as c,Mb as O,Pa as w,Sa as n,W as v,Xb as a,Yb as I,Zb as m,cb as y,tb as C,ub as _,vb as f,wb as u,xb as x,yb as b,zb as i}from"./chunk-6HMZLBRA.js";var d=class extends Error{};d.prototype.name="InvalidTokenError";function T(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function $(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return T(t)}catch{return atob(t)}}function A(e,t){if(typeof e!="string")throw new d("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,o=e.split(".")[r];if(typeof o!="string")throw new d(`Invalid token specified: missing part #${r+1}`);let h;try{h=$(o)}catch(g){throw new d(`Invalid token specified: invalid base64 for part #${r+1} (${g.message})`)}try{return JSON.parse(h)}catch(g){throw new d(`Invalid token specified: invalid json for part #${r+1} (${g.message})`)}}var p=class e{HttpClient=s(k);getAllUserOrders(t){return this.HttpClient.get(S.baseUrl+`orders/user/${t}`)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};function U(e,t){e&1&&(i(0,"section",0)(1,"div",2),c(2,"img",3),i(3,"h1",4),a(4,"No orders yet!"),l(),c(5,"app-button",5),l()()),e&2&&(n(5),b("title","Shop Now!"))}function N(e,t){if(e&1&&(i(0,"div",13),c(1,"img",14),i(2,"div",15),a(3),l()()),e&2){let r=t.$implicit;n(),b("src",r.product.imageCover,w),n(2),I(r.count)}}function F(e,t){if(e&1&&(i(0,"div",7)(1,"div",8)(2,"h5",9),a(3),l(),i(4,"div",10)(5,"button",11),a(6),l(),i(7,"button",11),a(8),l()()(),i(9,"div",12),u(10,N,4,2,"div",13,f),l()()),e&2){let r=t.$implicit,o=t.$index;n(3),m(" summary of order no: ",o+1," "),n(3),m(" Total: ",r.totalOrderPrice," EGP "),n(2),m(" Delivered: ",r.isDelivered?"Yes":"No"," "),n(2),x(r.cartItems)}}function B(e,t){if(e&1&&(i(0,"section",1)(1,"div",6),u(2,F,12,3,"div",7,f),l()()),e&2){let r=O();n(2),x(r.orders)}}var E=class e{allOrders=s(p);orders=[];decoded;id;ngOnInit(){this.decodeToken(),this.getOrders()}decodeToken(){this.decoded=A(localStorage.getItem("token")),this.id=this.decoded.id,console.log(this.decoded),console.log(this.id)}getOrders(){this.allOrders.getAllUserOrders(this.id).subscribe({next:t=>{this.orders=t,console.log(this.orders)},error:t=>{}})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=y({type:e,selectors:[["app-all-orders"]],decls:2,vars:1,consts:[[1,"w-[95%]","pt-[52px]","md:w-[90%]","h-[35rem]","mx-auto","mt-5","mb-4","rounded-lg","overflow-hidden","shadow-md"],[1,"w-[95%]","pt-[52px]","md:w-[90%]","mx-auto","mt-5","mb-4","rounded-lg","overflow-hidden","shadow-md"],[1,"flex","flex-col","items-center","justify-center","h-full","text-center"],["src","./imgs/tutti-shopping-basket-with-fruit-milk-and-wine-1 1.png","alt","cart image",1,"object-contain","w-48","sm:w-64","md:w-80","mx-auto"],[1,"text-lg","sm:text-xl","md:text-2xl","font-bold","my-5"],[3,"title"],[1,"grid","grid-cols-1","lg:grid-cols-8","xl:grid-cols-12","lg:min-h-[28rem]","gap-6"],[1,"lg:col-span-6","border","rounded-lg","shadow-md","border-blue-500/40","p-4","sm:p-6","bg-white","dark:bg-gray-800","h-full"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-3"],[1,"text-lg","sm:text-xl","font-semibold","text-blue-500"],[1,"flex","gap-4"],[1,"text-white","bg-gradient-to-r","from-black","via-blue-600","to-black","hover:bg-gradient-to-br","font-medium","rounded-lg","text-xs","sm:text-sm","px-3","py-1.5"],[1,"grid","grid-cols-3","sm:grid-cols-4","gap-3","mt-6"],[1,"relative"],["alt","image",1,"object-contain","rounded-lg","w-full","h-30",3,"src"],[1,"absolute","text-xs","border-4","pt-1","border-white","-top-2","right-4","text-white","flex","place-content-center","rounded-full","w-8","h-8","bg-gradient-to-r","from-blue-400","via-blue-500","to-blue-600","hover:bg-gradient-to-br"]],template:function(r,o){r&1&&C(0,U,6,1,"section",0)(1,B,4,0,"section",1),r&2&&_(o.orders.length==0?0:1)},dependencies:[j],encapsulation:2})};export{E as AllOrdersComponent};
